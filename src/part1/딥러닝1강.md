### [1]오전강의

### 🤔 단서 영역

- 도커를 사용하는 이유는 무엇인가?
- GPU와 CPU의 차이점은?
- 파이토치(PyTorch)와 텐서플로우(TensorFlow)의 차이점은?
- 딥러닝 개발 환경 구축에 필요한 요소들은?
- GPU 개발 환경에서 도커를 사용했을 때의 장점은?

### 📝 필기 영역

- **딥러닝 모델의 본질** (00:14)

  - 딥러닝 모델은 기본적으로 행렬 연산의 집합체
  - 수백만, 수십억 개의 파라미터(가중치)에 대한 수많은 행렬 연산 필요
  - 학습은 오차를 최소화하는 가중치(w)를 찾아가는 과정
- **CPU vs GPU** (00:17-00:19)

  - CPU: 코어 수가 제한적(4-6개), 범용 처리에 적합
  - GPU: 수천 개의 작은 코어 포함(최신 모델은 2만 개 이상), 행렬 연산 전문
  - CPU로 딥러닝 연산 수행 시 속도가 매우 느림
  - GPU는 병렬 처리로 CPU 대비 수십~수백 배 속도 향상
- **딥러닝 라이브러리** (00:21-00:24)

  - 두 가지 주요 딥러닝 프레임워크: TensorFlow와 PyTorch
  - TensorFlow: 윈도우에서 GPU 지원에 제한(2.10 버전부터 윈도우에서 GPU 지원 중단)
  - PyTorch: 윈도우 환경에서도 GPU 지원, 사용이 상대적으로 간편
- **GPU 개발 환경 요소** (00:30-00:35)

  - 드라이버: 운영체제가 GPU를 인식하고 사용할 수 있게 해주는 소프트웨어
  - CUDA: GPU의 코어를 제어하는 툴킷
  - cuDNN: 신경망을 GPU 코어에 구성하는 라이브러리
  - PyTorch는 드라이버만 설치하고 나머지는 라이브러리로 해결 가능
- **도커의 필요성** (00:37-00:38)

  - 재현성: 동일한 개발 환경을 여러 시스템에서 구현 가능
  - 호스트 시스템 보호: 복잡한 설치로 인한 시스템 손상 방지
  - 이식성: 로컬 PC에서 개발한 환경을 클라우드 서버로 쉽게 이동 가능
  - 컨테이너: 운영체제, 라이브러리 버전 등 모든 종속성을 포함한 격리된 환경

### ✨ 요약 영역

이 수업에서는 GPU 기반 딥러닝 개발 환경 구축의 필요성과 방법에 대해 배웠다. 딥러닝은 본질적으로 행렬 연산이며, GPU는 수천 개의 코어로 병렬 처리를 통해 CPU보다 훨씬 빠른 연산이 가능하다. 개발 환경 구축에는 드라이버, CUDA, cuDNN 등이 필요하지만, PyTorch는 드라이버만 설치하면 나머지는 라이브러리로 해결할 수 있어 편리하다. 도커는 재현성, 간편한 설정, 이식성 등의 장점을 제공하여 딥러닝 개발 환경 구축에 매우 유용하며, 팀 프로젝트나 서버 이전 시 동일한 환경을 보장한다. 수업의 앞으로 방향은 PyTorch 부분은 도커를 활용하고, LLM과 에이전트 부분은 윈도우 기반으로 진행할 예정이다.

| 항목             | TensorFlow             | PyTorch          |
| ---------------- | ---------------------- | ---------------- |
| 윈도우 GPU 지원  | 2.10버전부터 미지원    | 지원             |
| 설치 난이도      | 복잡 (WSL2, 도커 필요) | 상대적으로 간단  |
| 도커 활용 필요성 | 높음                   | 선택적           |
| 코드 직관성      | 다소 복잡              | 직관적, Pythonic |
| 커뮤니티/문서    | 매우 활발              | 매우 활발        |

### [2]오후강의

# 도커 컴포즈를 활용한 GPU 개발 환경 구축

### 🎯 주제

- 도커 컴포즈를 활용하여 GPU 개발 환경을 구축하고 파이토치와 주피터 노트북을 연동하는 과정을 학습

### 📝 핵심개념 정리

1. **도커 컴포즈 파일의 구조와 역할**

   - 도커 컴포즈는 이미지를 빌드하고 실행(run)까지 담당하는 도구
   - YAML 파일 형식으로 작성되며 서비스, 볼륨, 네트워크 등을 정의
   - 서비스 이름은 컨테이너 이름의 일부가 됨
   - ⭐ 여러 도커 파일이 있을 경우 디렉토리별로 관리하는 것이 효율적
2. **도커 컴포즈 파일 구성요소**

   - **빌드 경로**: 현재 디렉토리(.)는 도커파일이 있는 위치를 지정
   - **포트 매핑**: `포트:포트` 형식으로 호스트와 컨테이너 간 포트 연결
     - 앞의 숫자는 호스트 포트, 뒤의 숫자는 컨테이너 포트
     - 포트 번호는 다르게 설정 가능 (예: `18888:8888`)
   - **볼륨**: 호스트와 컨테이너 간 디렉토리 연동
     - `호스트 위치:컨테이너 위치` 형식으로 지정
     - ⭐ 볼륨을 통해 호스트에서 편집한 코드를 컨테이너에서 실행 가능
     - 볼륨 지정 전에 해당 디렉토리가 미리 생성되어 있어야 함
   - **환경변수**: 컨테이너 내부에서 사용할 환경 변수 설정
   - **디플로이(deploy)**: GPU 할당 등 리소스 설정
3. **도커 컴포즈 명령어**

   - `docker-compose up --build`: 이미지 빌드 후 컨테이너 실행
   - `docker-compose up -d`: 백그라운드에서 컨테이너 실행
   - `docker-compose down -v`: 컨테이너 종료 및 볼륨 삭제
   - ⭐ `up`과 `down`은 컨테이너 생성/삭제, `start`와 `stop`은 실행/중지
4. **VS Code/ANT와 도커 연동**

   - 도커 확장 프로그램 설치 필요 (Microsoft 제공)
   - 컨테이너 아이콘을 통해 실행 중인 컨테이너 관리 가능
   - `Attach Shell`: 컨테이너 내부 터미널에 접속
   - ⭐ ANT에서는 VS Code와 달리 `Attach Visual Studio Code` 기능이 제대로 작동하지 않을 수 있음
5. **GPU 환경 설정 및 테스트**

   - NVIDIA CUDA를 활용한 GPU 설정이 도커 컴포즈 파일에 포함됨
   - GPU 테스트를 통해 CPU와 GPU의 연산 속도 차이 확인 (약 31배)
   - GPU 환경에서 파이썬 코드 실행: `python gpu_test.py`
6. **주피터 노트북 연동**

   - 호스트와 컨테이너 간 포트 매핑 (8888:8888)을 통해 주피터 서버 연결
   - 기존 주피터 서버 연결: `http://localhost:8888` (HTTPS 아님)
   - 가상환경(venv) 커널 선택 필요: `opt/venv`에 설정된 환경
   - 디스플레이 네임 설정으로 서버 구분 용이
7. **리눅스 사용자 계정 관리**

   - 리눅스에는 관리자(루트) 계정과 일반 사용자 계정이 구분됨
   - ⭐ 업무 환경에서는 대개 루트 권한을 부여하지 않음
   - 컨테이너 내에서 파일 생성 시 권한 문제 발생 가능
8. **패키지 의존성 관리**

   - NumPy와 Pandas 버전 호환성 문제 발생 가능
   - NumPy 2.0 이상 버전은 Python 3.11 이상 필
   - pip보다 conda, uv, poetry가 의존성 관리에 더 효과적

### 1. 도커 환경 구축 및 실행 흐름

1. 도커 파일 및 도커 컴포즈 파일 준비 ↓
2. 필요한 디렉토리(src, cache 등) 미리 생성 ↓
3. requirements.txt 등 필요한 파일 준비 ↓
4. `docker compose build` 명령어로 이미지 빌드 ↓
5. `docker compose up -d` 명령어로 컨테이너 실행 (백그라운드) ↓
6. 컨테이너 상태 및 이미지 확인 (도커 데스크탑/명령어) ↓
7. 컨테이너 내부에 볼륨/포트 매핑 확인 ↓
8. VS Code 또는 NT에서 컨테이너에 어태치(Attach)하여 개발 환경 연동 ↓
9. Jupyter 서버 연동 및 커널 선택 ↓
10. 노트북/파이썬 파일 실행 및 GPU 테스트
11. 

### 2. VS Code/NT에서 컨테이너 연동 흐름

1. 확장 프로그램(도커, 파이썬, 주피터 등) 설치 ↓
2. 컨테이너 실행 확인 (도커 데스크탑/NT 아이콘) ↓
3. 컨테이너에 Attach Shell (NT) 또는 Attach VS Code (VS Code) ↓
4. 컨테이너 내부에서 소스코드/노트북 파일 실행 ↓
5. Jupyter 서버 연결 및 커널 선택 ↓
6. 개발 및 테스트 진행

### 3.부정 강조 및 주의사항 정리

1. **디렉토리 미리 생성 필수**
   * 볼륨 지정 전에 `src`, `cache` 등 디렉토리를 반드시 미리 만들어야 함.
2. **포트 매핑 주의**
   * 컨테이너 내부 포트(예: 8888)는 변경이 불가할 수 있음.
   * "내부적으로 서버가 세팅이 될 때 8888로 세팅, 이게 컨테이너에 포트가 됩니다. 얘가 픽스가 되어 있는 경우가 있어요. 못 바꾸는 경우가 있을 수 있어요."
3. **도커 Compose 명령어 사용 시 주의**
   * `up`과 `down`의 차이, `down`은 컨테이너 자체가 삭제됨.
   * "다운을 시켜버리면 컨테이너 자체가 지워져요. 다운 함부로 하시면 안 돼요."
   * `stop`/`start`는 컨테이너를 일시 정지/재시작만 함.
4. **확장팩(Extension) 설치 시 주의**
   * NT(Agent 기반 툴)와 VS Code의 마켓플레이스가 다르므로, 확장팩 호환성 문제 발생 가능.
   * "VS 코드에서 확장팩을 설치가 되는데 왜 안티에선 안 돼라고 하는 부분이 확장팩 설치 가져오는 데가 틀려서 그래요."
   * "MS사의 확장팩을 설치했는데도 불구하고, 잘 먹지 않을 경우가 있을 수 있다는 겁니다."
5. **리눅스/윈도우 계정 권한 주의**
   * 리눅스에서는 루트(root) 권한이 없으면 파일 접근/수정이 불가할 수 있음.
   * "나중에 사무실 업무 환경에 가면 루트 권한은 절대적으로 주어지지 않아요."
   * "계정이 루트가 아니면 생성할 때 루트 계정으로 다 생성되기 때문에 내가 루트 계정이 권한이 없는 사람이야 그러면 들어갔을 때 거기 못 들어가요."
6. **버전 충돌 주의**
   * numpy, pandas 등 라이브러리 버전 충돌로 인한 에러 발생 가능.
   * "넘파이 2.0 버전으로 올라가면서 난리가 났어요. 이 numpy를 쓰는 모든 library가 다 충돌이 나가지고 바에라가 떨어지고 난리가 났거든요."
7. **Jupyter 커널 연동 시 주의**
   * NT에서는 커널 연동이 잘 안 될 수 있음.
   * "커널이 문제잖아요. 그런데 커널이 지금 현재 요 vs 요 안티는 뭐예요? 호스트에 있는 거예요. ... 연동을 해야 된단 말이에요. 그거 해주는 서버가 주피터 서버라고 했잖아요. ... 안 될 수 있습니다. 엔티가 엔티 기준으로 말씀드립니다."
